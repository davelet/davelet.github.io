---
layout: post
title: 领域驱动设计DDD入门系列
categories: [dev]
tags: [ddd]
---
领域驱动设计不是新概念，但却是刚火起来的概念。这里通过7节课带你入门DDD。本系列课程整理自[Oreilly](https://learning.oreilly.com/videos/domain-driven-design-distilled/9780134593449)的视频课。这是第一堂课：为何DDD？$$

这堂课介绍的是DDD相关的概念，以及为何你应该认真考虑在自己的项目里使用DDD。会通俗地讲解DDD的战略和战术建模工具，希望你能“无痛”地学会使用DDD（因为很多人都觉得学习DDD很痛苦）。这里会对比好的、坏的、高效的设计，并阐明高效设计优先。之后介绍DDD的战略战术工具。然后讨论如何使用DDD去提炼你的业务模型。

为什么要学习DDD？并且要快点学会？首先想到的当然是改善我们的产品 -- 好的开发人员都热衷于持续完善自己的东西。俗话说“活到老学到老”，当出现了能切实改善产品设计的技术时我们都会情不自禁地选择进修。现在这种技术来临了：DDD就是最可能改善我们产品质量的思考方式。另一个原因是DDD为我们带来了很多工具，能够提升我们项目的成功率，帮助我们发挥优势，战胜对手。DDD就是建模工具，它能帮你根据你公司独特的商业需求设计应用。此外，DDD能让应用容易扩展，并达到最佳性能。

有人认为DDD是十分复杂的软件开发范式。真的是吗？从性价比上讲不一定，DDD的确提供了很多高级开发工具，要掌握它们的确不太容易。所以本系列就是帮你提升DDD能力的，让你从此“无痛”建模。

- So let's talk for a moment about good design versus bad design. What kind of design do you perform? Good design or bad design? I think you're gonna learn something about your tendencies to develop with good design principles or not so good design principles as we cover these topics. Does this describe you? Some teams use what I call the "the task-board shuffle". This is where, when using Scrum or Kanban or something like that, design is effectively taking a sticky note and moving it from the to do column to the in process column. That's the task-board shuffle. No further thought goes into how to design software other than that single motion. After leaving the standup meeting and claiming some sort of task to work on, the developer will march right back to their desk and they'll start developing software without giving any initial thought to what they're doing. They kind of feel their way through the software design. Now, some people consider this to be an economy, where they try to economize software development with what they call "no design". However, what I find is that "no design" is a fallacy. There's no such thing as "no design". Actually, there is good design and there is bad design. And when you use the task-board shuffle and you walk back to your desk and start developing software, design occurs. It happens as the developer starts pounding out code through their keyboard. Design still goes through their mind. It's just that typically it ends up being bad design. So, with the choice that there is either good design or bad design, which do you want to perform? One of Scrum's most important tenets is knowledge acquisition. That's right. It's not just to put sticky notes of tasks in a to do column, move them to the in progress column and then move them to the done column. That's not really what Scrum is primarily about. Scrum is about, for one part, knowledge acquisition. And we should be very concerned with acquiring knowledge before we develop the software. And this is what we call design. And, by acquiring knowledge about the business, the core aspects of the business, each of us has the opportunity to acquire a good amount of knowledge in order to develop the best software to make our business competitively successful and help them to soar to new heights with their software. Due to the use of bad design techniques, I find that there are several insidious problems in the software industry today. I see a lot of these problems as I go from company to company, either consulting or teaching. And a lot of times, we'll spend our sessions trying to figure out how to overcome these insidious problems within an organization and how to improve software development. So watch out for these in your own area of the business. Sometimes software development is considered a cost center rather than a profit center. This is an insidious problem, because it can be quite demoralizing to the software development team or teams. In this case, the organization has a culture that almost wishes that they didn't have to use computers or software at all. They wish that they could conduct business without them, because they see it almost as a nuisance to do so. On the other hand, organizations who appreciate the software development process and the teams and how software can make their business more competitive actually champions in their area, is a much better culture to be in. And you may not be able to do anything about this situation yourself. You may simply have to look for another opportunity where you can find a business that appreciates software development as a means to gain a better reputation and higher revenues within their industry. One thing that developers can do something about, though, is not chasing shiny objects. Developers oftentimes try to throw technology at business problems, thinking that technology alone will solve business problems and even help the business to soar. However, what I find is that when the technology itself is seen as the means to conquer in a specific problem space, it often turns out much worse than using good design techniques. If it's seen that some product, some framework, or something like that, is a better road to developing good software, you're probably most likely going to be disappointed in the results. You should really favor software development through good design. One of those technologies that is seen as a silver bullet is the database. And very often there's too much attention given to the database and the data model rather than giving priority to the business process and business operations. Data is quite important. It's very important. Without data, what would we process? But the business operations and business processes are really the key to understanding what is important, significant, and unique about the organization that you're working with. And using good design techniques will lead you toward understanding the business process and business operations and how to use the data to your best advantage. So watch out for this insidious problem of putting too much emphasis on the database and the data model. Oftentimes too developers don't put enough importance, or emphasis, on naming objects and operations with a business focus. I've heard the expression, "It's just a name. "It doesn't matter. "It's just the software. "It doesn't matter what we name it." This is actually a completely backwards attitude. Frankly, naming is quite important, because it ties the mental model of the business into the software itself. Otherwise, there's a constant mapping between the mental model that the business has and business experts have and what the software actually expresses. You want to actually be able to look at the software and understand the business process and business operations, because the names that are chosen are good. So watch out for this insidious problem. Here are some more insidious problems. Poor collaboration between stakeholders and developers, where the written specification actually acts as a divide between the business and the developers rather than helping to cause greater collaboration between the two groups. We actually want to meld software development with the business so that there's a very tight bond between the two and where that collaboration rules over documentation. We don't want specifications to be the driver to force us to stay in offices or cubicles or workspaces separated from the team. Watch out for this insidious problem. Collaboration is a significantly important tool between software developers and the business. Project estimates are also often given far too much attention. This causes delay and causes problems when we're trying to be productive with software development. Here's what I mean by that. Developers are asked to give estimates on the software that they're going to produce. So this takes the software developer off course from where they actually need to be, and that is producing software, and steers them down another fork in the road that causes them to go off their main task in order to produce estimates. It takes a lot of time and research and diverts their attention from software development. We want to stay away from that as much as possible. And I do provide the means in this course to produce trustworthy estimates that are attainable. The task-board shuffle, I've already introduced you to this thought. That and "no design" lead to developing a big ball of mud. What's a big ball of mud? Well, we're going to discuss that, in fact, in the next section. It's an insidious problem, but oftentimes it's caused from no design or what companies want to call "no design", which doesn't actually exist. What it really means is bad design and the task-board shuffle. Those combined lead to developing the insidious big ball of mud. I find that developers house business logic in their user interface and in their persistence code. This leads to locking and blocking database operations where slow queries and incompletable tasks are performed on the database. Even further, wrong model abstractions lead to wrong solutions and miss the concrete business needs of the organization. Sometimes developers try to design a highly abstract solution, where the abstraction actually leads them far away from the ultimate solution that addresses the concrete business needs and instead makes them focus in the wrong area. I find that modeling wrong abstractions is a very big problem in our industry. I'm going to teach you how to avoid wrong abstractions. Strong coupling between systems also makes systems difficult to maintain. I see this very often within microservices, a service-oriented architecture. How can you solve that problem? I'm going to teach you how in this course. Because of the strong coupling between services, I find that there's often failed coupling between services that leads to failing business operations and unreconcilable data between the whole system made up of multiple services. I'm also going to teach you how to avoid such problems in this course. One thing that you should understand about modeling software is that we model software intentionally or not. That is, we use good design or we use bad design. The economy of "no design" is a fallacy. Be clear about that. It fools many into thinking that they can deliver quality software faster without any thoughtful design at all. This is wrong. The resulting software actually diverges from the business goals and becomes more difficult to maintain. So there's actually a gap between what the business wants, what the business goals are, and what the software actually provides. We want to harmonize this. And so don't be fooled that, in some way, you can actually economize software development through "no design". You perform design no matter what. What we actually want to focus on is good design. You know, probably what's even better than good design is effective design. Because good design uses good design techniques, but effective design leads us to the point where we are actually adhering to what the business needs from software. It needs what distinguishes the business from its competition. And so, if given the opportunity to try to economize through "no design" or effective design, I highly recommend that you use effective design. It forces the business to understand at what it must excel. Now, what I mean by this is, our organization that we work for, the business, must excel at something. It cannot excel at everything, though. An organization that works in the insurance industry should try to be the best insurance company within their particular area of insurance. But it can't be the best database company as well. It can't be the best framework company. It can't be the best accounting company per se. And so, understanding what the business core initiatives actually are and should be will help us to produce better software that meets the needs of the business. This is effective design. And it helps developers to create a correct model according to what the actual unique business needs are. Have you ever traveled on an old road? A road that has perhaps been in existence for hundreds of years? What's interesting about that road? It often takes dips and turns that seem almost unexpected. It's uncomfortable. Why did this all come about? Who designed this particular road? You know what actually happened in many cases? That road started out as a cart path, some meager means for a few people to travel in order to reach some destination. It had a purpose, but it had a very narrow purpose. What happened over time? More and more people started taking that cart path. Perhaps the way got broadened a bit. And then, eventually, someone added pavement to that cart path, but it still followed that cruft design that its original users created. What's the difference between that old cart path that became a road, however uncomfortable it is today, and a superhighway? The difference is that the superhighway had intentional design. It was led to its completion through a lot of research, through a lot of design, through careful engineering. That expressway, that superhighway is more or less a pleasure to travel, when at high speeds you can turn a corner comfortably without hitting the brakes, whereas on that old cart path that has now become a road, you're probably going to wear your brakes out soon if you travel that road often. It's uncomfortable. It's even dangerous in some places. Software development can be designed from the same perspectives. It can either be like that cart path that is eventually turned into a paved road, or a well-designed, well-thought-out, well-engineered road or superhighway that's comfortable and relatively safe to travel. Remember that effective design will lead to such software metaphorically. And so this is the kind of path that you need to design for your business.

- The tools that you're going to be using when you employ domain-driven design are going to help you to be a much better software developer. They're going to help you to use effective design, and some of the most important domain-driven design tools, in fact, I would say the most critical software design tools within the DDD toolbox are the strategic design tools. You're going to learn about bounded context, the ubiquitous language, context mapping, sub-domains, and how all of these strategic design tools will help you to leverage this toolbox in a very, very effective way. Sometimes, strategic design is a completely new thought to software developers, and that may be the case with you, but don't gloss over this. It is really the most important tools in the DDD toolbox.

- On the other hand, DDD also provides tactical modeling tools and I introduce you to two of the most important tactical modeling tools in this course. That of aggregates and domain events. Aggregates help you to control transactions and maintain your business and variants with data consistency in your models. Domain events help you by modeling facts, the significant things or occurrences that happen within a domain model. With these two tactical tools, and understanding them well, you will be on your way to developing more robust software that adheres to the ubiquitous language and helps your business by meeting the technical needs. But we also don't want to put too much emphasis on the tactical tools because you will find that the strategic tools are far more important because sometimes the tactical tools are limited in use depending on the platform that you're developing on, the technical platform or the language that you're using, or the technique that you're using, such as functional programming versus object oriented programming. But what I have done is narrow down the tactical tools to just these two significant tools that are the most important and probably the most applicable across all those technology platforms, languages and techniques.

- What you're going to find is that domain-driven design is about crunching knowledge, about knowledge acquisition. The amount of knowledge that you are going to crunch when using domain-driven design is significant. It's going to seem like this, a funnel of all kinds of thoughts, ideas, experiments, documentation, and that funnel is stilling all of that knowledge into the very, very significant drop of knowledge that contains the highest concentration of understanding. It's all about experimentation and I'm going to show you ways to accelerate the acquisition of knowledge so that you can meet the demanding timelines that we face in our industry. By doing this, you will be in the best position to lead your organization to new heights with software. You will be able to use effective software design.

- Even in this distilled course, there's a lot to learn. Of course I can't teach you everything about domain-driven design, but I do believe that I am teaching you some of the most important aspects of DDD. So, without delay, let's get started.

---

- Thank you for watching Domain-Drive Design Distilled LiveLessons. In this online course, you learned what domain-driven design, or DDD, is all about. I distilled DDD for you, so that you can put it into basic use on your projects. In lesson one, I introduced you to the concepts behind DDD, and why you should seriously consider putting DDD into practice on your projects. Here I familiarized you with both the DDD strategic and tactical modeling tools, and why knowledge crunching is so important. In lesson two, I acquainted you with the all important bounded context and ubiquitous language strategic design tools. Lesson three taught you the advantages of using subdomains to overcome the complexity of integrating with legacy systems that don't employ explicit and well-defined models. Following this, lesson four highlighted context mapping, and the various team relationships and integration techniques that can be used to manage how multiple bounded contexts work in harmony to form a whole system solution. Following my discussions about DDD strategic design, I switched gears to discuss the two most important tactical modeling tools. Lesson five covered aggregates, the tactical modeling tool that helps you design small and efficient object clusters that manage consistency constraints using transactions. Following this, in lesson six, I addressed the design and publication of domain events, a tactical modeling tool that actually also plays a big part in strategic integration. Finally, I finished off with showing you how you can accelerate your DDD modeling efforts, and manage projects that employ DDD. Here you learned about event storming, and how DDD is used in an agile project. You are now in a great position to start to put DDD into practice on your own projects using both strategic and tactical design tools. If you would like to have me provide a full three day IDDD workshop and consultation at your company location, I am happy to help. To book the IDDD workshop and consultations, please send me an email. My email address is vaughn, that's V-A-U-G-H-N, @forcomprehension.com. I welcome you to visit both http://forcomprehension.com, and http://idddworkshop.com. Thanks again for watching.